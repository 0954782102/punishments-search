<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–ü–æ—à—É–∫ –ø–æ–∫–∞—Ä–∞–Ω—å —ñ —á–∞—Ç Furry</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Roboto', sans-serif; background: #e8f0fe; display: flex; flex-direction: column; align-items: center; padding: 30px 10px; }
  h1 { color: #1a73e8; margin-bottom: 10px; text-align:center;}
  .logo { margin-bottom: 20px; }
  .logo img { width: 120px; height: auto; border-radius: 12px; cursor: pointer; }

  input { padding: 14px; width: 600px; border: 2px solid #1a73e8; border-radius: 12px; margin-bottom: 20px; font-size: 16px; outline: none; transition: 0.2s; }
  input:focus { box-shadow: 0 0 10px rgba(26, 115, 232, 0.5); }
  .result { background: #fff; padding: 25px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); width: 700px; text-align: left; white-space: pre-wrap; line-height: 1.6; font-size: 15px; color: #202124; margin-bottom:30px; }
  
  /* –ß–∞—Ç Furry */
  .chat-container { width: 700px; max-width: 100%; background:#fff; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.15); padding:16px; display:flex; flex-direction:column; max-height:500px; overflow:hidden;}
  .chat-messages { flex:1; overflow-y:auto; margin-bottom:10px; }
  .message { margin-bottom:8px; padding:8px 12px; border-radius:12px; max-width:80%; line-height:1.4; }
  .user-msg { background:#1a73e8; color:#fff; align-self:flex-end; }
  .furry-msg { background:#e8f0fe; color:#202124; align-self:flex-start; position:relative;}
  .typing { font-style:italic; font-size:13px; color:#666; margin-bottom:4px; }

  .chat-input { display:flex; }
  .chat-input input { flex:1; padding:10px; font-size:14px; border:2px solid #1a73e8; border-radius:8px; margin-right:8px; }
  .chat-input button { padding:10px 16px; font-weight:600; border-radius:8px; background:#1a73e8; color:#fff; border:none; cursor:pointer; }
  
  @media(max-width:768px){ input{width:100%; font-size:14px; padding:12px;} .result,.chat-container{width:100%;} }

  /* –º–æ–¥–∞–ª (–≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ —Å—Ç–∏–ª—ñ –≤ —Ç–≤–æ—î–º—É –∫–æ–¥—ñ ‚Äî —Ç—É—Ç –∑–±–µ—Ä—ñ–≥–∞—é –æ–¥–Ω–∞–∫–æ–≤–∏–π –≤–∏–≥–ª—è–¥) */
  .modal-backdrop { position: fixed; inset:0; background: rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; z-index:9999; }
  .modal { background:#fff; width:min(90vw,700px); border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,.25); border:2px solid #1a73e8; }
  .modal-header {padding:14px 18px;background:#e8f0fe;font-weight:700;font-size:17px;color:#1a73e8;}
  .modal-body {padding:16px 18px;max-height:70vh;overflow:auto;}
  .modal-actions {display:flex;justify-content:space-between;padding:12px 18px 16px;}
  .btn {padding:8px 14px;border-radius:8px;border:2px solid #1a73e8;cursor:pointer;font-weight:600;}
  .btn-primary {background:#1a73e8;color:#fff;}
  /* –Ω–µ–≤–µ–ª–∏–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–ª–µ—î—Ä–∞ */
  .audio-row { display:flex; gap:8px; align-items:center; margin-top:12px; }
  .progress { flex:1; }
  .small { font-size:13px; color:#333; }
</style>
</head>
<body>

<!-- ===== –î–û–î–ê–ù–û: –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û –ü–†–ò –ü–ï–†–®–û–ú–£ –ó–ê–ü–£–°–ö–£ ===== -->
<div id="introModal" class="modal-backdrop" style="display:none;">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modal-header">–í—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å–∞–π—Ç—É ‚Ä¢ –í–µ—Ä—Å—ñ—è 0.1</div>
    <div class="modal-body">
      <p class="small">–í—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å–∞–π—Ç—É. –í–µ—Ä—Å—ñ—è 0.1 ‚Äî –ø—Ä–æ—Å–ª—É—Ö–∞–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –≤—ñ–¥ Furry.</p>

      <div class="audio-row">
        <button id="introPlay" class="btn btn-primary">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç</button>
        <button id="introPause" class="btn">‚è∏ –ü–∞—É–∑–∞</button>
        <button id="introStop" class="btn">‚èπ –°—Ç–æ–ø</button>
        <input id="introProgress" class="progress" type="range" min="0" max="100" value="0" />
      </div>

      <audio id="introAudio" preload="auto" crossorigin="anonymous"
        src="https://screenapp.io/app/#/shared/Gs0yBmr6L_">
        <!-- –Ø–∫—â–æ —Ü–µ–π src –Ω–µ —î –ø—Ä—è–º–∏–º —Ñ–∞–π–ª–æ–º, –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ –Ω–µ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –π–æ–≥–æ. -->
      </audio>

      <p class="small" style="margin-top:8px;color:#666">–Ø–∫—â–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–µ –ø—Ä–∞—Ü—é—î ‚Äî –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –°—Ç–∞—Ä—Ç —ñ, —É –≤–∏–ø–∞–¥–∫—É –ø–æ–º–∏–ª–∫–∏, —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –±—É–¥–µ –æ–∑–≤—É—á–µ–Ω–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.</p>
    </div>
    <div class="modal-actions">
      <button id="introClose" class="btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
      <button id="introNever" class="btn btn-primary">–ù–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É</button>
    </div>
  </div>
</div>
<!-- ===== –ö–Ü–ù–ï–¶–¨ –ú–û–î–ê–õ–¨–ù–û–ì–û –í–Ü–ö–ù–ê ===== -->

<div class="logo">
  <a href="https://ibb.co/5bsnjyM" target="_blank">
    <img src="https://i.ibb.co/5bsnjyM/logo.png" alt="Furry Logo">
  </a>
</div>

<h1>–ü–æ—à—É–∫ –ø–æ–∫–∞—Ä–∞–Ω—å</h1>
<input type="text" id="search" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ DM, DB, TK, SK, PG, –ù—ñ–∫–Ω–µ–π–º)...">
<div class="result" id="result">–¢—É—Ç –∑'—è–≤–∏—Ç—å—Å—è –ø–æ–∫–∞—Ä–∞–Ω–Ω—è</div>

<div class="chat-container">
  <div class="chat-messages" id="chat-messages">
    <div class="furry-msg">–ü—Ä–∏–≤—ñ—Ç, —è Furry üòé. –Ø –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑–Ω–∞–π—Ç–∏ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è –∞–±–æ –¥–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –ø–æ —Å–∞–π—Ç—É. –ù–µ –∑–∞–±—É–≤–∞–π—Ç–µ –ø—Ä–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Discord —Ç–∞ –ø—Ä–∞–≤–∏–ª–∞!</div>
  </div>
  <div class="chat-input">
    <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...">
    <button id="chat-send">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
  </div>
</div>

<script>
// ====== –ü–æ–∫–∞—Ä–∞–Ω–Ω—è ======
const punishments = {
  "dm": { rule: "4.1", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "mass dm": { rule: "4.1.1", punishment: "Jail 120 —Ö–≤–∏–ª–∏–Ω" },
  "dm –≤ gz": { rule: "4.1.2", punishment: "Jail 30 —Ö–≤–∏–ª–∏–Ω" },
  "mass dm –≤ gz": { rule: "4.1.3", punishment: "Warn" },
  "db": { rule: "4.2", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "mass db": { rule: "4.2.1", punishment: "Jail 60 —Ö–≤–∏–ª–∏–Ω" },
  "db –≤ gz": { rule: "4.2.2", punishment: "Jail 30 —Ö–≤–∏–ª–∏–Ω" },
  "mass db –≤ gz": { rule: "4.2.3", punishment: "Warn" },
  "—Ä–∫": { rule: "4.3", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "rpk": { rule: "4.3.1", punishment: "Jail 30 —Ö–≤–∏–ª–∏–Ω" },
  "sk": { rule: "4.4", punishment: "Jail 30 —Ö–≤–∏–ª–∏–Ω" },
  "mass sk": { rule: "4.4.1", punishment: "Jail 120 —Ö–≤–∏–ª–∏–Ω" },
  "tk": { rule: "4.5", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "mass tk": { rule: "4.5.1", punishment: "Jail 60 —Ö–≤–∏–ª–∏–Ω" },
  "pg": { rule: "4.6", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "nonrp": { rule: "4.7", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "nonrp cop": { rule: "4.7.1", punishment: "Jail 60 —Ö–≤ / Warn" },
  "–≤–∏—Ö—ñ–¥ –ø—ñ–¥ —á–∞—Å —Ä–ø": { rule: "4.8", punishment: "Jail 30 —Ö–≤–∏–ª–∏–Ω" },
  "—É–Ω–∏–∫–∞–Ω–Ω—è –ø–æ–≥–æ–Ω–∏ —ñ–Ω—Ç–µ—Ä'—î—Ä–∏": { rule: "4.9", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "—É–Ω–∏–∫–∞–Ω–Ω—è –ø–æ–≥–æ–Ω–∏ –≤–æ–¥–∞": { rule: "4.10", punishment: "Jail 20 —Ö–≤–∏–ª–∏–Ω" },
  "–≤—Ç—Ä—É—á–∞–Ω–Ω—è –≤ —Ä–ø": { rule: "4.11", punishment: "Jail 10 —Ö–≤–∏–ª–∏–Ω" },
  "–ø–µ—Ä–µ—à–∫–æ–¥–∏ —Ä–ø": { rule: "4.12", punishment: "Jail 30 —Ö–≤–∏–ª–∏–Ω" },
  "—É–Ω–∏–∫–∞–Ω–Ω—è —Ä–ø": { rule: "4.13", punishment: "Jail 30 —Ö–≤–∏–ª–∏–Ω" },
  "–∞—Ñ–∫ —Ñ—Ä–∞–∫—Ü—ñ—è": { rule: "4.15", punishment: "Kick" },
  "—Å–∫—ñ–Ω –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–æ—ó —Å—Ç–∞—Ç—ñ": { rule: "4.16", punishment: "–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è / –ó–≤—ñ–ª—å–Ω–µ–Ω–Ω—è" },
  "–≥—Ä–æ—à–æ–≤—ñ –º–∞—Ö—ñ–Ω–∞—Ü—ñ—ó –º–∞–ª—ñ": { rule: "4.17", punishment: "–ë–∞–Ω –¥–æ 60 –¥–Ω—ñ–≤" },
  "–≥—Ä–æ—à–æ–≤—ñ –º–∞—Ö—ñ–Ω–∞—Ü—ñ—ó –≤–µ–ª–∏–∫—ñ": { rule: "4.18", punishment: "–ü–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∏–π –±–∞–Ω" },
  "–æ–±–º–∞–Ω –º–∞–π–Ω–æ": { rule: "4.19", punishment: "–ü–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∏–π –±–∞–Ω" },
  "—Å–ø–∞–º –º–∞–π–Ω–æ": { rule: "4.20", punishment: "–ü–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∏–π –±–∞–Ω" },
  "–±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø–æ—Å–ª—É–≥–∏": { rule: "4.21", punishment: "–ü–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∏–π –±–∞–Ω" },
  "–∑–º–µ–Ω—à–µ–Ω–µ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è –∑–∞ –æ–±–º–∞–Ω": { rule: "4.22", punishment: "–ë–∞–Ω 3-15 –¥–Ω—ñ–≤" },
  "–ø–æ–≥—Ä–æ–∑–∏": { rule: "4.23", punishment: "Jail / Mute 30 —Ö–≤–∏–ª–∏–Ω" },
  "mg": { rule: "5.1", punishment: "–ú—É—Ç 20 —Ö–≤ / Warn" },
  "tl": { rule: "5.2", punishment: "–ú—É—Ç 5 —Ö–≤–∏–ª–∏–Ω" },
  "–¥—É–∂–∫–∏ ic": { rule: "5.3", punishment: "–ú—É—Ç 5 —Ö–≤–∏–ª–∏–Ω" },
  "flood": { rule: "5.4", punishment: "–ú—É—Ç 10 —Ö–≤–∏–ª–∏–Ω" },
  "–º—É–∑–∏–∫–∞/–∑–º—ñ–Ω–∞ –≥–æ–ª–æ—Å—É": { rule: "5.5", punishment: "–ú—É—Ç 15 —Ö–≤–∏–ª–∏–Ω" },
  "caps": { rule: "5.6", punishment: "–ú—É—Ç 5 —Ö–≤–∏–ª–∏–Ω" },
  "–Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω–∞ –ª–µ–∫—Å–∏–∫–∞": { rule: "5.7", punishment: "–ú—É—Ç 20-60 —Ö–≤" }
};

// ====== –ü–æ—à—É–∫ –ø–æ–∫–∞—Ä–∞–Ω—å ======
document.getElementById("search").addEventListener("input", function(){
  const query = this.value.trim().toLowerCase();
  const resultBox = document.getElementById("result");
  if(!query){ resultBox.textContent = "–¢—É—Ç –∑'—è–≤–∏—Ç—å—Å—è –ø–æ–∫–∞—Ä–∞–Ω–Ω—è"; return; }
  let results=[];
  for(let key in punishments){
    if(key.includes(query)){
      results.push(`${punishments[key].rule}: ${key.toUpperCase()}: ${punishments[key].punishment}`);
    }
  }
  resultBox.textContent = results.length>0 ? results.join('\n') : "–ü–æ–∫–∞—Ä–∞–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ";
});

// ====== –ß–∞—Ç Furry ======
const chatInput = document.getElementById('chat-input');
const chatSend = document.getElementById('chat-send');
const chatMessages = document.getElementById('chat-messages');

function appendMessage(text, className){
  const div = document.createElement('div');
  div.className = `message ${className}`;
  div.textContent = text;
  chatMessages.appendChild(div);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

function searchPunishment(query){
  query = query.toLowerCase();
  let results = [];
  for(let key in punishments){
    if(key.includes(query) || punishments[key].punishment.toLowerCase().includes(query)){
      results.push(`${punishments[key].rule}: ${key.toUpperCase()}: ${punishments[key].punishment}`);
    }
  }
  return results.length>0 ? results.join('\n') : null;
}

function getResponse(msg){
  const m = msg.toLowerCase();

  if(/–ø—Ä–∏–≤—ñ—Ç|–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π|hi/.test(m)) 
      return "–ü—Ä–∏–≤—ñ—Ç! –Ø Furry üòé. –ú–æ–∂—É –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è –∞–±–æ –¥–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó.";

  const punishment = searchPunishment(m);
  if(punishment) return punishment;

  if(/—è–∫|—â–æ —Ä–æ–±–∏—Ç–∏|–¥–∞–ª—ñ|—è–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—å|—â–æ —Ç—É—Ç/.test(m))
      return "–í–≤–µ–¥–∏ –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è –∞–±–æ –Ω—ñ–∫ —ñ —è –ø–æ–∫–∞–∂—É –ø–æ–∫–∞—Ä–∞–Ω–Ω—è. –ù–∞–ø—Ä–∏–∫–ª–∞–¥: DM, DB, TK, SK, PG.";

  if(/—Ö—Ç–æ —Å—Ç–≤–æ—Ä–∏–≤|—Ç–≤—ñ–π —Ç–≤–æ—Ä–µ—Ü—å|who created/i.test(m))
      return "–ú–µ–Ω–µ —Å—Ç–≤–æ—Ä–∏–≤ –ê—Ä—Ç–µ–º –ü—Ä–æ—Ü–∫–æ, –Ω–∞ –æ—Å–Ω–æ–≤—ñ –º–æ–≤–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è Python —Ç–∞ —Å–∫—Ä–∏–ø—Ç—É Jarvis. –Ø –¥–æ–ø–æ–º–∞–≥–∞—é –∞–¥–º—ñ–Ω—É –Æ–ê –æ–Ω–ª–∞–π–Ω. –í–µ—Ä—Å—ñ—è 0.1, –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –∞–≤—Ç–æ—Ä Artem_Furrry. –ú–∞—é —Å–≤—ñ–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —á—ñ—Ç–∫–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π.";

  if(/—ñ–Ω—Å—Ç—Ä—É–∫—Ü|—è–∫ –∑–Ω–∞–π—Ç–∏|–ø–æ—à—É–∫/i.test(m))
      return "–©–æ–± –∑–Ω–∞–π—Ç–∏ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è, –≤–≤–µ–¥–∏ –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ (DM, DB, TK, SK, PG, –ù—ñ–∫–Ω–µ–π–º) —É –ø–æ–ª–µ –ø–æ—à—É–∫—É –∞–±–æ –∑–∞–ø–∏—Ç–∞–π –º–µ–Ω–µ –≤ —á–∞—Ç—ñ.";

  return "–Ø –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑–Ω–∞–π—Ç–∏ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è –∞–±–æ –¥–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –ø–æ —Å–∞–π—Ç—É. –°–ø—Ä–æ–±—É–π –Ω–∞–ø–∏—Å–∞—Ç–∏ DM, DB, TK —Ç–æ—â–æ.";
}

function furryReply(userMsg){
  const typing = document.createElement('div');
  typing.className='typing';
  typing.textContent='Furry –¥—Ä—É–∫—É—î...';
  chatMessages.appendChild(typing);
  chatMessages.scrollTop = chatMessages.scrollHeight;
  setTimeout(()=>{
    chatMessages.removeChild(typing);
    appendMessage(getResponse(userMsg),'furry-msg');
  }, 800 + Math.random()*600);
}

chatSend.addEventListener('click', ()=>{
  const text = chatInput.value.trim();
  if(!text) return;
  appendMessage(text,'user-msg');
  chatInput.value='';
  furryReply(text);
});

chatInput.addEventListener('keydown', e=>{
  if(e.key==='Enter') chatSend.click();
});

/* ========== –õ–æ–≥—ñ–∫–∞ –º–æ–¥–∞–ª–∫–∏ –∑ –∞—É–¥—ñ–æ ========== */
(function(){
  const modal = document.getElementById('introModal');
  const audio = document.getElementById('introAudio');
  const playBtn = document.getElementById('introPlay');
  const pauseBtn = document.getElementById('introPause');
  const stopBtn = document.getElementById('introStop');
  const closeBtn = document.getElementById('introClose');
  const neverBtn = document.getElementById('introNever');
  const progress = document.getElementById('introProgress');

  const SPOKEN_TEXT = "–í—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å–∞–π—Ç—É. –í–µ—Ä—Å—ñ—è 0.1. –ü—Ä–æ—Å–ª—É—Ö–∞–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –≤—ñ–¥ Furry.";

  // –ü–æ–∫–∞–∑–∞—Ç–∏ –º–æ–¥–∞–ª–∫—É –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤—ñ–∑–∏—Ç—ñ
  function shouldShow() {
    return localStorage.getItem('furry_intro_seen') !== 'true';
  }
  function markSeen() {
    localStorage.setItem('furry_intro_seen', 'true');
  }

  function showModal(){
    modal.style.display = 'flex';
  }
  function hideModal(){
    modal.style.display = 'none';
  }

  // fallback: —è–∫—â–æ –∞—É–¥—ñ–æ –Ω–µ –ø—Ä–æ–≥—Ä–∞—î—Ç—å—Å—è, –≥–æ–≤–æ—Ä–∏–º–æ —á–µ—Ä–µ–∑ speechSynthesis
  function ttsSpeak(text) {
    if(!('speechSynthesis' in window)) return;
    try {
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'uk-UA';
      u.rate = 0.95;
      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    } catch(e) { /* ignore */ }
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É
  function updateProgress(){
    if(!audio.duration || isNaN(audio.duration)) { progress.value = 0; return; }
    const pct = (audio.currentTime / audio.duration) * 100;
    progress.value = Math.floor(pct);
  }

  // –ü–æ–¥—ñ—ó –∫–Ω–æ–ø–æ–∫
  playBtn.addEventListener('click', ()=>{
    // —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ audio; —è–∫—â–æ –ø–æ–º–∏–ª–∫–∞ ‚Äî fallback to TTS
    if(audio.src && audio.src.trim().length>0) {
      audio.play().catch(err=>{
        // fallback
        ttsSpeak(SPOKEN_TEXT);
      });
    } else {
      ttsSpeak(SPOKEN_TEXT);
    }
  });

  pauseBtn.addEventListener('click', ()=>{
    if(audio.paused) {
      // resume
      audio.play().catch(err=>{
        ttsSpeak(SPOKEN_TEXT);
      });
    } else {
      audio.pause();
    }
  });

  stopBtn.addEventListener('click', ()=>{
    audio.pause();
    audio.currentTime = 0;
    updateProgress();
    // Also cancel any TTS if running
    if('speechSynthesis' in window) speechSynthesis.cancel();
  });

  // progress seek
  progress.addEventListener('input', ()=>{
    if(audio.duration && !isNaN(audio.duration)) {
      const pct = parseFloat(progress.value) / 100;
      audio.currentTime = Math.max(0, Math.min(audio.duration * pct, audio.duration));
    }
  });

  // sync UI
  audio.addEventListener('timeupdate', updateProgress);
  audio.addEventListener('ended', ()=> { progress.value = 100; });
  audio.addEventListener('error', ()=> {
    // on audio error ‚Äî fallback TTS and notify user
    ttsSpeak(SPOKEN_TEXT);
  });

  closeBtn.addEventListener('click', ()=>{
    hideModal();
    markSeen(); // –∑–∞–∫—Ä–∏–ª–∏ ‚Äî –≤–≤–∞–∂–∞—Ç–∏ –ø–æ–±–∞—á–µ–Ω–∏–º
    // –Ω–µ –∑—É–ø–∏–Ω—è—î–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ ‚Äî –∑—É–ø–∏–Ω—è—î–º–æ –∞—É–¥—ñ–æ
    try{ audio.pause(); audio.currentTime = 0; }catch(e){}
    if('speechSynthesis' in window) speechSynthesis.cancel();
  });

  neverBtn.addEventListener('click', ()=>{
    hideModal();
    localStorage.setItem('furry_intro_seen', 'true');
    try{ audio.pause(); audio.currentTime = 0; }catch(e){}
    if('speechSynthesis' in window) speechSynthesis.cancel();
  });

  // –Ø–∫—â–æ –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫—É—î –∞–≤—Ç–æ–ø–ª–µ—î—Ä ‚Äî –º–∏ —á–µ–∫–∞—î–º–æ –Ω–∞ –∂–µ—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–Ω–∞—Ç–∏—Å–∫)
  // –ü–æ–∫–∞–∑—É—î–º–æ –º–æ–¥–∞–ª–∫—É –Ω–∞ –ø–µ—Ä—à–æ–º—É –≤—ñ–∑–∏—Ç—ñ
  document.addEventListener('DOMContentLoaded', ()=>{
    if(shouldShow()) {
      showModal();
      // optional: try to preload or try to play on a user gesture
      // but we won't auto-play without gesture
      // add click listener to page to try one-time autoplay after gesture
      function oneGesture() {
        // try to play once (silently catch)
        try {
          audio.play().then(()=>{}).catch(()=>{ /* ignore */ });
        } catch(e){}
        window.removeEventListener('click', oneGesture);
        window.removeEventListener('keydown', oneGesture);
      }
      window.addEventListener('click', oneGesture);
      window.addEventListener('keydown', oneGesture);
    }
  });
})();
</script>

</body>
</html>
